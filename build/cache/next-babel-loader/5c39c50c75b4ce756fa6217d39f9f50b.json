{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/you/Code/github/kksso/pages/studio/[id].js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from \"react\";\nimport { StudiosContext } from \"../../services/studios\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\"; // import ReactMarkdown from \"react-markdown\";\n\nimport { Grid, Row, Col } from \"react-flexbox-grid/dist/react-flexbox-grid\";\nimport { Box, Heading, Text, Button } from \"grommet\";\nimport { ChevronLeft, Disc, Instagram, Globe } from \"react-feather\";\nimport VisitForm from \"../../components/forms/VisitForm\";\nimport ImagesCarousel from \"../../components/ImagesCarousel\";\nimport styles from \"./index.module.scss\";\n\nvar Studio = function Studio() {\n  _s();\n\n  var router = useRouter();\n  var id = router.query.id;\n\n  var _useContext = useContext(StudiosContext),\n      studios = _useContext.studios,\n      fetchStudios = _useContext.fetchStudios,\n      loading = _useContext.loading,\n      error = _useContext.error;\n\n  var _useState = useState(),\n      studio = _useState[0],\n      setStudio = _useState[1];\n\n  var _useState2 = useState([]),\n      images = _useState2[0],\n      setImages = _useState2[1];\n\n  var prepImagesforCarousel = function prepImagesforCarousel(files, captions) {\n    var imgs = files.reduce(function (acc, current, index) {\n      acc.push({\n        filename: files[index].trim(),\n        caption: captions[index] || \"\"\n      });\n      return acc;\n    }, []);\n    return imgs;\n  };\n\n  useEffect(function () {\n    if (!studios.length) {\n      fetchStudios();\n    }\n  }, []);\n  useEffect(function () {\n    if (studios.length && id && !studio) {\n      // const match = studios.filter((s) => {\n      //   return s.id === id;\n      // });\n      // To DO: WTH\n      // somehow filter is not working here !!!\n      var matchStudio = studios[id - 1];\n      setStudio(matchStudio);\n      setImages(prepImagesforCarousel(matchStudio.imagesFiles, matchStudio.imagesCaptions));\n    }\n  }, [loading, studios, id]);\n  var paragraphSeperator = \"\\\\\";\n\n  var makeParagraphs = function makeParagraphs(paragraphString, pSeparator) {\n    return paragraphString.split(pSeparator).map(function (paragraph, index) {\n      return __jsx(\"p\", {\n        key: index,\n        className: styles.studioParagraph,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 7\n        }\n      }, paragraph) // <ReactMarkdown key={index}>{paragraph}</ReactMarkdown>\n      ;\n    });\n  };\n\n  return __jsx(Grid, {\n    fluid: true,\n    className: styles.studio,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, __jsx(ChevronLeft, {\n    className: styles.icon,\n    size: 16,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }), \" \", __jsx(Link, {\n    href: \"/studios\",\n    className: styles.backlink,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \"BACK\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }), error && error.code !== \"22P02\" && __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"Error: \", JSON.stringify(error)), loading || !studio ? __jsx(Box, {\n    align: \"center\",\n    pad: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: \"/img/loader.svg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  })) : __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, images.length && __jsx(ImagesCarousel, {\n    images: images,\n    artist: studio.artist,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }), __jsx(Col, {\n    xs: 12,\n    md: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }), studio.artist && __jsx(\"h2\", {\n    className: styles.maintitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, studio.artist), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }), studio.textLong && makeParagraphs(studio.textLong, paragraphSeperator), __jsx(\"h3\", {\n    className: styles.sectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, \"Mediums\"), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, studio.styles), __jsx(\"h3\", {\n    className: styles.sectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, \"Studio\"), __jsx(\"h4\", {\n    className: styles.subsectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, __jsx(Disc, {\n    className: styles.icon,\n    size: 18,\n    strokeWidth: \"2\",\n    color: \"#FFC0CB\",\n    fill: \"#fff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }), \" \", studio.city), studio.textStudio && makeParagraphs(studio.textStudio, paragraphSeperator), studio.links && __jsx(React.Fragment, null, __jsx(\"h3\", {\n    className: styles.sectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 19\n    }\n  }, \"Links\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }), studio.links.split(\",\").map(function (link) {\n    return __jsx(Link, {\n      href: link.trim(),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 23\n      }\n    }, link.includes(\"instagram\") ? __jsx(Instagram, {\n      className: styles.icon,\n      size: 28,\n      strokeWidth: \"1\",\n      color: \"#4B4B4B\",\n      fill: \"#FFF\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 27\n      }\n    }) : __jsx(Globe, {\n      className: styles.icon,\n      size: 28,\n      strokeWidth: \"1\",\n      color: \"#4B4B4B\",\n      fill: \"#FFF\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 27\n      }\n    }));\n  }))), __jsx(Col, {\n    xs: 12,\n    md: 5,\n    mdOffset: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, studio.visitRules && studio.visitRules.length > 0 && __jsx(React.Fragment, null, __jsx(\"h3\", {\n    className: styles.sectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, studio.artist.split(\" \")[0], \"'s Visit Rules\"), __jsx(\"ul\", {\n    className: styles.rules,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }, studio.visitRules.split(\";\").map(function (rule, index) {\n    return __jsx(\"li\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 23\n      }\n    }, rule);\n  }))), __jsx(\"h3\", {\n    className: styles.sectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, \"General Visit Tips\"), __jsx(\"ul\", {\n    className: styles.rules,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }, \"Show up on time\"), __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, \"Ask before taking photos of the artist and artworks\"), __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, \"A gift is almost always a nice touch\")), studio.openDates ? __jsx(VisitForm, {\n    openVisitDates: studio.openDates.split(\",\"),\n    artistEmail: studio.email,\n    artistName: studio.artist,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }) : __jsx(React.Fragment, null, __jsx(\"h3\", {\n    className: styles.sectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 19\n    }\n  }, \"The artist has no upcoming visit dates right now\"), __jsx(\"h4\", {\n    className: styles.subsectiontitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 19\n    }\n  }, \"Please check back again later\"))))));\n};\n\n_s(Studio, \"e+d7e0VrwhnmBDCznOrCt26aWFE=\", false, function () {\n  return [useRouter];\n});\n\n_c = Studio;\nexport default Studio; // export async function getStaticPaths() {\n//   return {\n//     paths: [{ params: { id: \"1\" } }, { params: { id: \"2\" } }],\n//     fallback: false, // See the \"fallback\" section below\n//   };\n// }\n\nvar _c;\n\n$RefreshReg$(_c, \"Studio\");","map":{"version":3,"sources":["/home/you/Code/github/kksso/pages/studio/[id].js"],"names":["useState","useEffect","useContext","StudiosContext","useRouter","Link","Grid","Row","Col","Box","Heading","Text","Button","ChevronLeft","Disc","Instagram","Globe","VisitForm","ImagesCarousel","styles","Studio","router","id","query","studios","fetchStudios","loading","error","studio","setStudio","images","setImages","prepImagesforCarousel","files","captions","imgs","reduce","acc","current","index","push","filename","trim","caption","length","matchStudio","imagesFiles","imagesCaptions","paragraphSeperator","makeParagraphs","paragraphString","pSeparator","split","map","paragraph","studioParagraph","icon","backlink","code","JSON","stringify","artist","maintitle","textLong","sectiontitle","subsectiontitle","city","textStudio","links","link","includes","visitRules","rules","rule","openDates","email"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { StudiosContext } from \"../../services/studios\";\n\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\n\n// import ReactMarkdown from \"react-markdown\";\n\nimport { Grid, Row, Col } from \"react-flexbox-grid/dist/react-flexbox-grid\";\nimport { Box, Heading, Text, Button } from \"grommet\";\nimport { ChevronLeft, Disc, Instagram, Globe } from \"react-feather\";\n\nimport VisitForm from \"../../components/forms/VisitForm\";\nimport ImagesCarousel from \"../../components/ImagesCarousel\";\nimport styles from \"./index.module.scss\";\n\nconst Studio = () => {\n  const router = useRouter();\n  const { id } = router.query;\n\n  const { studios, fetchStudios, loading, error } = useContext(StudiosContext);\n\n  const [studio, setStudio] = useState();\n  const [images, setImages] = useState([]);\n\n  const prepImagesforCarousel = (files, captions) => {\n    const imgs = files.reduce((acc, current, index) => {\n      acc.push({\n        filename: files[index].trim(),\n        caption: captions[index] || \"\",\n      });\n      return acc;\n    }, []);\n\n    return imgs;\n  };\n\n  useEffect(() => {\n    if (!studios.length) {\n      fetchStudios();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (studios.length && id && !studio) {\n      // const match = studios.filter((s) => {\n      //   return s.id === id;\n      // });\n      // To DO: WTH\n      // somehow filter is not working here !!!\n      const matchStudio = studios[id - 1];\n      setStudio(matchStudio);\n      setImages(\n        prepImagesforCarousel(\n          matchStudio.imagesFiles,\n          matchStudio.imagesCaptions\n        )\n      );\n    }\n  }, [loading, studios, id]);\n\n  const paragraphSeperator = \"\\\\\";\n\n  const makeParagraphs = (paragraphString, pSeparator) => {\n    return paragraphString.split(pSeparator).map((paragraph, index) => (\n      <p key={index} className={styles.studioParagraph}>\n        {paragraph}\n      </p>\n      // <ReactMarkdown key={index}>{paragraph}</ReactMarkdown>\n    ));\n  };\n\n  return (\n    <Grid fluid className={styles.studio}>\n      <Col xs={12}>\n        <ChevronLeft className={styles.icon} size={16} />{\" \"}\n        <Link href=\"/studios\" className={styles.backlink}>\n          BACK\n          {/* \n          <>\n            <ChevronLeft className={styles.icon} size={14} /> <span> BACK </span>\n          </> \n          */}\n        </Link>\n        <br />\n        <br />\n        {/* TO DO\n         Remove this error\n         Error: {\"hint\":null,\"details\":null,\"code\":\"22P02\",\n         \"message\":\"invalid input syntax for type integer: \\\"NaN\\\"\"}\n          */}\n        {error && error.code !== \"22P02\" && (\n          <strong>Error: {JSON.stringify(error)}</strong>\n        )}\n        {loading || !studio ? (\n          <Box align=\"center\" pad=\"large\">\n            <img src={`/img/loader.svg`} />\n          </Box>\n        ) : (\n          <Row>\n            {images.length && (\n              <ImagesCarousel images={images} artist={studio.artist} />\n            )}\n            <Col xs={12} md={6}>\n              <br />\n\n              {studio.artist && (\n                <h2 className={styles.maintitle}>{studio.artist}</h2>\n              )}\n              <br />\n              {studio.textLong &&\n                makeParagraphs(studio.textLong, paragraphSeperator)}\n\n              <h3 className={styles.sectiontitle}>Mediums</h3>\n              <p>{studio.styles}</p>\n\n              <h3 className={styles.sectiontitle}>Studio</h3>\n\n              <h4 className={styles.subsectiontitle}>\n                <Disc\n                  className={styles.icon}\n                  size={18}\n                  strokeWidth=\"2\"\n                  color=\"#FFC0CB\"\n                  fill=\"#fff\"\n                />{\" \"}\n                {studio.city}\n              </h4>\n\n              {studio.textStudio &&\n                makeParagraphs(studio.textStudio, paragraphSeperator)}\n\n              {studio.links && (\n                <>\n                  <h3 className={styles.sectiontitle}>Links</h3>\n                  <br />\n                  {studio.links.split(\",\").map((link) => {\n                    return (\n                      <Link href={link.trim()}>\n                        {link.includes(\"instagram\") ? (\n                          <Instagram\n                            className={styles.icon}\n                            size={28}\n                            strokeWidth=\"1\"\n                            color=\"#4B4B4B\"\n                            fill=\"#FFF\"\n                          />\n                        ) : (\n                          <Globe\n                            className={styles.icon}\n                            size={28}\n                            strokeWidth=\"1\"\n                            color=\"#4B4B4B\"\n                            fill=\"#FFF\"\n                          />\n                        )}\n                      </Link>\n                    );\n                  })}\n                </>\n              )}\n            </Col>\n            <Col xs={12} md={5} mdOffset={1}>\n              {studio.visitRules && studio.visitRules.length > 0 && (\n                <>\n                  <h3 className={styles.sectiontitle}>\n                    {studio.artist.split(\" \")[0]}'s Visit Rules\n                  </h3>\n                  <ul className={styles.rules}>\n                    {studio.visitRules.split(\";\").map((rule, index) => (\n                      <li key={index}>{rule}</li>\n                    ))}\n                  </ul>\n                </>\n              )}\n              <h3 className={styles.sectiontitle}>General Visit Tips</h3>\n              <ul className={styles.rules}>\n                <li>Show up on time</li>\n                <li>Ask before taking photos of the artist and artworks</li>\n                <li>A gift is almost always a nice touch</li>\n              </ul>\n              {studio.openDates ? (\n                <VisitForm\n                  openVisitDates={studio.openDates.split(\",\")}\n                  artistEmail={studio.email}\n                  artistName={studio.artist}\n                />\n              ) : (\n                <>\n                  <h3 className={styles.sectiontitle}>\n                    The artist has no upcoming visit dates right now\n                  </h3>\n                  <h4 className={styles.subsectiontitle}>\n                    Please check back again later\n                  </h4>\n                </>\n              )}\n            </Col>\n          </Row>\n        )}\n      </Col>\n    </Grid>\n  );\n};\n\nexport default Studio;\n\n// export async function getStaticPaths() {\n//   return {\n//     paths: [{ params: { id: \"1\" } }, { params: { id: \"2\" } }],\n//     fallback: false, // See the \"fallback\" section below\n//   };\n// }\n"]},"metadata":{},"sourceType":"module"}